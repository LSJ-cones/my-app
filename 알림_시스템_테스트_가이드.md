# 🔔 알림 시스템 테스트 가이드

## 📋 개요
웹 기반 알림 시스템 테스트 방법을 안내합니다.

---

## 🚀 테스트 시작하기

### 1. 웹 테스트 페이지 접속
```
http://localhost:8081/notification-test.html
```

### 2. JWT 토큰 설정
1. 먼저 스웨거 UI에서 로그인하여 토큰을 받습니다:
   - `http://localhost:8081/swagger-ui/index.html` 접속
   - `POST /api/auth/login` API 사용
   - 요청 본문:
   ```json
   {
     "username": "admin",
     "password": "admin123"
   }
   ```
   - 응답에서 `token` 값을 복사

2. 웹 테스트 페이지에서 토큰 입력:
   - 페이지 로드 시 자동으로 토큰 입력 창이 나타남
   - 복사한 토큰을 붙여넣기

### 3. 웹소켓 연결
- "연결" 버튼 클릭
- 연결 상태가 "연결됨"으로 변경되면 성공

---

## 🧪 테스트 시나리오

### 시나리오 1: 댓글 알림 테스트
1. **댓글 생성**:
   - 댓글 내용: "테스트 댓글입니다!"
   - 게시글 ID: 1
   - 댓글 타입: 일반 댓글
   - "댓글 생성" 버튼 클릭

2. **결과 확인**:
   - 실시간 로그에서 "댓글 생성 성공" 메시지 확인
   - 알림 목록에서 새로운 댓글 알림 확인
   - 실시간 수신 카운터 증가 확인

### 시나리오 2: 대댓글 알림 테스트
1. **대댓글 생성**:
   - 댓글 내용: "테스트 대댓글입니다!"
   - 게시글 ID: 1
   - 댓글 타입: 대댓글
   - 부모 댓글 ID: 1 (또는 존재하는 댓글 ID)
   - "댓글 생성" 버튼 클릭

2. **결과 확인**:
   - 실시간 로그에서 "댓글 생성 성공" 메시지 확인
   - 알림 목록에서 새로운 대댓글 알림 확인

### 시나리오 3: 좋아요 알림 테스트
1. **좋아요 반응 생성**:
   - "좋아요 반응" 버튼 클릭
   - 댓글 ID 입력 (존재하는 댓글 ID)
   - 확인

2. **결과 확인**:
   - 실시간 로그에서 "좋아요 반응 생성 성공" 메시지 확인
   - 알림 목록에서 새로운 좋아요 알림 확인

### 시나리오 4: 알림 관리 테스트
1. **알림 읽음 처리**:
   - 알림 목록에서 "읽음 처리" 버튼 클릭
   - 알림 상태가 "읽음"으로 변경되는지 확인

2. **모든 알림 읽음 처리**:
   - "모든 알림 읽음 처리" 버튼 클릭
   - 모든 알림이 읽음 상태로 변경되는지 확인

3. **알림 삭제**:
   - 알림 목록에서 "삭제" 버튼 클릭
   - 알림이 목록에서 사라지는지 확인

---

## 📊 실시간 모니터링

### 통계 카드
- **전체 알림**: 데이터베이스에 저장된 총 알림 개수
- **읽지 않은 알림**: 아직 읽지 않은 알림 개수
- **실시간 수신**: 웹소켓을 통해 실시간으로 수신한 알림 개수

### 실시간 로그
- 모든 API 호출과 웹소켓 이벤트가 실시간으로 기록됨
- 타임스탬프와 함께 상세한 로그 확인 가능
- "로그 지우기" 버튼으로 로그 초기화 가능

---

## 🔧 문제 해결

### 웹소켓 연결 실패
1. **서버 상태 확인**:
   ```bash
   netstat -ano | findstr :8081
   ```

2. **서버 재시작**:
   ```bash
   cd backend
   ./gradlew bootRun
   ```

### JWT 토큰 오류
1. **토큰 유효성 확인**:
   - 토큰이 만료되었을 수 있음
   - 스웨거에서 다시 로그인하여 새 토큰 발급

2. **토큰 형식 확인**:
   - `Bearer ` 접두사 없이 토큰만 입력
   - 예: `eyJhbGciOiJIUzUxMiJ9...`

### API 호출 실패
1. **CORS 오류**:
   - 브라우저 개발자 도구에서 오류 메시지 확인
   - 서버의 CORS 설정 확인

2. **인증 오류**:
   - JWT 토큰이 올바르게 설정되었는지 확인
   - 토큰이 만료되지 않았는지 확인

---

## 🎯 테스트 체크리스트

### 기본 기능 테스트
- [ ] 웹소켓 연결 성공
- [ ] JWT 토큰 설정 성공
- [ ] 알림 목록 조회 성공
- [ ] 읽지 않은 알림 개수 조회 성공

### 알림 생성 테스트
- [ ] 댓글 생성 시 알림 생성
- [ ] 대댓글 생성 시 알림 생성
- [ ] 좋아요 반응 시 알림 생성
- [ ] 실시간 알림 수신

### 알림 관리 테스트
- [ ] 개별 알림 읽음 처리
- [ ] 모든 알림 읽음 처리
- [ ] 알림 삭제
- [ ] 오래된 알림 정리

### UI/UX 테스트
- [ ] 알림 타입별 색상 구분
- [ ] 읽음/읽지 않음 상태 표시
- [ ] 실시간 통계 업데이트
- [ ] 반응형 디자인 확인

---

## 📈 성능 테스트

### 대량 알림 테스트
1. **다중 댓글 생성**:
   - 여러 개의 댓글을 연속으로 생성
   - 알림 처리 성능 확인

2. **동시 사용자 시뮬레이션**:
   - 여러 브라우저 탭에서 동시 테스트
   - 웹소켓 연결 안정성 확인

### 메모리 사용량 확인
- 브라우저 개발자 도구에서 메모리 사용량 모니터링
- 장시간 테스트 시 메모리 누수 확인

---

## 🎉 테스트 완료 후

### 결과 정리
1. **성공한 기능들** 기록
2. **발견된 문제점들** 기록
3. **개선 제안사항** 정리

### 다음 단계
1. **실제 사용자 테스트** 진행
2. **성능 최적화** 검토
3. **추가 기능 개발** 계획

---

**🎯 목표**: 모든 알림 기능이 정상적으로 작동하고, 사용자 경험이 원활한지 확인하는 것입니다!
